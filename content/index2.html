
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MyEnergy | Green Button Initiative</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="../assets/css/myenergy_bootstrap.css" rel="stylesheet">
    <link href="../assets/css/adamStyle.css" rel="stylesheet">
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
		
      }

	  	#content-slider {
	      width: 50%;
	      height: 6px;
	      margin: 5px;
	      background: #BBBBBB;
	      position: relative;
		  margin-left:25%;
		  margin-bottom:30px;
	    }
		.ui-slider-handle {
	      width: 8px;
	      height: 14px;
	      position: absolute;
	      top: -4px;
	      background: #478AFF;
	      border: solid 1px black;
	    }
	
		.panel img {
			left: 35%;
			position: relative;
			margin-bottom:25px;
			height:300px;
			width:300px;
		}
		
		.panel {
			margin-bottom:100px;
		}

    </style>
    <link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
  
	<script type="text/javascript">
	
	<!-- Begin
	function getParams() {
	var idx = document.URL.indexOf('?');
	var params = new Array();
	if (idx != -1) {
	var pairs = document.URL.substring(idx+1, document.URL.length).split('&');
	for (var i=0; i<pairs.length; i++) {
	nameVal = pairs[i].split('=');
	params[nameVal[0]] = nameVal[1];
	}
	}
	return params;
	}
	params = getParams();
	// End -->
	
	</script>

</head>

  

  <body onload="findZip()">
	<div id="bg_image_overlay">
		&nbsp;
	</div>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <img class="brand" alt="image-logo" src="../images/logo_white.png" />
          <!-- Need logo to link to MyEnergy site -->
          <div class="nav-collapse collapse">

            <div class="navbar-form pull-right">
            <ul class="nav">
              <!-- Need to confirm our headers and add appropriate links -->
              <li><a href="http://www.myenergy.com/about">Learn about MyEnergy</a></li>
              <li><a href="http://www.greenbuttondata.org/greenabout.html">Learn about the Green Button</a></li>
              <li><a href="http://web.myenergy.com/">Read our Blog</a></li>
              <li><a href="https://www.myenergy.com/utilities">For Utilities</a></li>
              <li><a href="https://twitter.com/myenergy">Follow Us</a></li>
			</ul>
            </div>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

	<div class="panel landing-container index2" id="panel_back">

		<h1>The average bill for <span class="zip" style="color:#0092BE">98110</span> is <span class="blue average" style="color:#0092BE">$0</span>.</h1>
		<p>1 kilowatt hour costs <span id="price" style="color:#0092BE">$.0963</span> where you live.</p>
		<img src="../assets/img/bulb_glow.png" width="80" height="102" alt="Image">
		<div id="content-slider"></div>
		<p>You're charged for a a kilowatt of electricity per every hour you spend it. How many hours of light from a 100 watt incandescent light bulb can <span class="average" id="placeholder">$0</span> buy?</p>
		
		<p>Seem like a lot? Wonder where your bill is going? Sign up with myEnergy to learn more energy saving tips, or download your Green Button Information.</p>
		
		
		
		
		
		
	</div>
 
<footer>
<div class="bottomButton">
   <div class="bottom_email" id="bottom_email"><p class="trigger1">Want to learn more about reducing your utility bills?</p>
    <form>
      <input id="email_address" type="text" /><br>Email<br><br>
      <button id="email_submit" class="btn bottom_submit" type="submit">Keep me posted</button>
    </form>
   </div>
   <div class="bottom_join" id="bottom_join"><p class="trigger1"> Ready to start saving more today?<br>Create a free MyEnergy profile</p><br><br><img src="../assets/img/fb_google.png" alt="fb-google">
    <form>
      <input id="join_fullname" type="text" placeholder="your name"><br>Full Name<br><br>
      <input id="join_email" type="text"><br>Email<br><br>
      <input id="join_password"><br>Password<br><br>
      <button id="join" class="bottom_submit" type="submit">Create my account</button>
    </form>
   </div>
   <div id="bottom_download"><p>Download this data for free.<br>Developers, we have an API.</p><br><br>
   <button id="xml">XML</button><button id="csv">CSV</button> <br>
    <br><br>For developers interested in MyEnergy's data (now accessible by 300,000,000 Americans), please fill out the form below.<br><br>
   <form>
      <input id="dev_fullname" type="text"><br>Full Name<br><br>
      <input id="dev_email" type="text"><br>Email<br><br>
      <input id="dev_platform"><br>Platform<br><br>
      <button id="download" class="btn" >Download my data</button>
   </form>
   </div>
</div>
</footer>

    <script type="text/javascript" src="../assets/js/backstretch.js"></script>

    <script>
    $(document).ready(function(){
  TriggerClick = 0;

  $(".bottom_email").click(function(){
	console.log("yes");
    if(TriggerClick==0){
         TriggerClick=1;
console.log("yes");
         $(".bottom_email").animate({height:'180px'}, 500);
    }else{
         TriggerClick=0;
         $(".bottom_email").animate({height:'47px'}, 500);
    };
  });
});
$(document).ready(function(){
  TriggerClick = 0;

  $("#bottom_join").click(function(){
    if(TriggerClick==0){
         TriggerClick=1;
console.log("yes");
         $("#bottom_join").animate({height:'370px'}, 500);
    }else{
         TriggerClick=0;
         $("#bottom_join").animate({height:'47px'}, 500);
    };
  });
});
$(document).ready(function(){
  TriggerClick = 0;

  $("#bottom_download").click(function(){
    if(TriggerClick==0){
         TriggerClick=1;
         $("#bottom_download").animate({height:'480px'}, 500);
    }else{
         TriggerClick=0;
         $("#bottom_download").animate({height:'47px'}, 500);
    };
  });
});
    </script>

	<script>
	var zip;
	
    function findZip(zip)
    {
		
        zip = unescape(params["ZIP"]);
        var isValid = /^[0-9]{5}(?:-[0-9]{4})?$/.test(zip);
        // Check to see if a valid zip code was entered. If not, alert user.
        if (!isValid)
        {
            alert('Invalid Zip Code. Please try again.');
            return false;
        }
        // If zip was valid, start doing stuff with it.
        // Additionally, this prevents anything from happening until a zip was entered. That is, this stuff won't happen on page load.
        else
        {
            $.getJSON('myenergy_data/electricitysample.json', function functions(data) {
                // Search for the given zip code. Alert if there is no data on that zip code.
                if (data.feed.entry[0].title.search(zip) == -1)
                {
                    alert("Zip Code not found. Try again.");
                }
                // Else, grab data relevant to that zip code.
                else
                {
                    // Initialize average variables
					var averagecost = 0.0;
                    var averagevalue = 0.0;
                    var counter = 0;
                    // Temporary, for testing. Just print stuff out about the zip's entry.
                    var output="<ul>";
                    // Set a variable for the path so I don't have to keep typing a really long path to find the element
                    var intervalreadingpath = data.feed.entry[2].content.IntervalBlock.IntervalReading;
                    // For loop to go through every element of IntervalReading
                    for (var i in intervalreadingpath) {
                        // Convert (start) to something readable by humans
                        var date = new Date(intervalreadingpath[i].timePeriod.start * 1000);
                        //output += Date(intervalreadingpath[i].timePeriod.start);
                        //output += date;
                        output+= "<li>" + 
                            //Date(intervalreadingpath[i].timePeriod.start * 1000) 
                            date + " ---- " + 
                            (intervalreadingpath[i].timePeriod.duration / 86400) + " days" + " ---- " + 
                            "$" + parseFloat(intervalreadingpath[i].cost) + " ---- " + 
                            parseFloat(intervalreadingpath[i].value) + " kWh" + "</li>";
                        averagevalue = averagevalue + parseFloat(intervalreadingpath[i].value);
                        averagecost = averagecost + parseFloat(intervalreadingpath[i].cost);
                        counter += 1;
                    };
					
					

                    output+="</ul>";
                    averagevalue = averagevalue / counter;
                    averagecost = averagecost / counter;
                    output+="AVERAGE VALUE IS " + averagevalue + " ---- ";
                    output+="AVERAGE COST IS " + averagecost;
					averagecost=Math.round(averagecost);
					
					
					$(document).ready(function(){
						
					  	var images = jQuery('.panel img'); //caches the query when dom is ready
						
					 
					  $("#content-slider").slider({
						value:averagecost,
						min:0,
						max:200,
					    animate: true,
					    step: 1,
					    slide: function( event, ui ) {
							$("#placeholder").text('$' + $( "#content-slider" ).slider( "value" ) );
							
							var size = (ui.value / 100);
							images.stop(true).animate({opacity:size});
							
						}
					  });
					
					$(".average").text('$' + $( "#content-slider" ).slider( "value" ) );
					$('#kwh').text(Math.round(averagecost/.0963));
					$images.css({opacity:(averagecost/500)});
					
					
					
                }
)};
            });
		}	
	
        // Prevent page from reloading.
    return false;    
    }
</script>
	<script>
	$.backstretch("../images/bg_home.jpeg")
	</script>

  </body>
</html>
